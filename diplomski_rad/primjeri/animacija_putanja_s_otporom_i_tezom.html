<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>Animacija putanje čestice s otporom i silom težom</title>
    <script src="../2d/klase/Vektor2D.js"></script>
    <script src="../2d/klase/MaterijalnaTocka.js"></script>
    <script src="../2d/klase/Cestica.js"></script>
    <script src="../2d/klase/GlobalniKoordinatniSustav.js"></script>
    <script src="../2d/klase/Otpor.js"></script>
    <script src="../2d/klase/SilaTeza.js"></script>
    <script>
      function main() {
        let canvas = document.getElementById("canvas");
        let gks = new GlobalniKoordinatniSustav(canvas, -10, 10, -10, 10);

        let cestica = new Cestica(
          0.1,
          new MaterijalnaTocka(1, new Vektor2D(-4, -4), new Vektor2D(1, -2))
        );

        let silaTeza = new SilaTeza(0.25);
        let otporSredstva = new Otpor(0.1);
        let dt = 0.001;

        function render() {
          gks.ocisti();
          const sila = silaTeza.F(cestica.materijalnaTocka);
          const silaOtpora = otporSredstva.F(cestica.materijalnaTocka);
          cestica.materijalnaTocka.pomakni(dt, sila.zbroji(silaOtpora));
          cestica.iscrtaj(gks);
          cestica.zarobi(gks, false, false, true, false);
          requestAnimationFrame(render);
        }

        render();
      }

      window.onload = main;
    </script>
  </head>
  <body>
    <canvas
      id="canvas"
      width="600"
      height="600"
      style="border: 1px solid black; background-color: black"
    ></canvas>
  </body>
</html>
